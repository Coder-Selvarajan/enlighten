<!DOCTYPE html>

<html>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Async Programming | Enlightening KT</title>

<link href="https://fonts.googleapis.com/css?family=Oxygen|Oxygen+Mono:300,400,700" rel="stylesheet">
<link rel="stylesheet" href="/normalize.min.css">


<link rel="stylesheet" href="/book.min.50f271dd26ebebd6d8a9877137ff6aaf244378f21a325ced70fb19102403d4ef.css">
  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main>

    <aside class="menu fixed">
      <nav role="navigation">
        <h2 class="brand">
  <a href="http://example.org/">Enlightening KT</a>
</h2>
        

        
          <ul>
<li><a href="/docs/javascript/basics">Javascript Udemy</a>

<ul>
<li><a href="/docs/javascript/tools-converters">Tools/Converters</a></li>
<li><a href="/docs/javascript/basics">Basics</a></li>
<li><a href="/docs/javascript/functions">Functions</a></li>
<li><a href="/docs/javascript/window-object">Window Object</a></li>
<li><a href="/docs/javascript/dom-object-selectors">DOM Object &amp; Selectors</a></li>
<li><a href="/docs/javascript/events">Events</a></li>
<li><a href="/docs/javascript/localstorage">Localstorage</a></li>
<li><a href="/docs/javascript/object-oriented">Object Oriented Features</a></li>
<li><a href="/docs/javascript/async-programming">Async Programming</a></li>
<li><a href="/docs/javascript/rest-api">REST Api</a></li>
</ul></li>
<li><a href="/docs/linux">Linux</a></li>
<li><a href="/docs/python">Python</a></li>
<li><a href="/docs/hugo-tips">Hugo Tips</a></li>
</ul>

        

        
      </nav>
    </aside>

    <div class="content">
      <header>
        <label for="menu-control">
  <img src="http://example.org//svg/menu.svg" />
</label>
<strong>Async Programming</strong>
      </header>
      <article class="markdown">

<h1 id="async-programming">Async Programming</h1>

<p>XHR - XmlHttpRequest</p>

<p>Other api methods:</p>

<pre><code>- Fetch api
- Axios
- Superagent
- Jquery
- Node http
</code></pre>

<blockquote>
<p>Ajax - Xhr</p>
</blockquote>

<h2 id="xhr-code">XHR Code:</h2>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">    <span style="color:#111">document</span><span style="color:#111">.</span><span style="color:#75af00">getElementById</span><span style="color:#111">(</span><span style="color:#d88200">&#39;button&#39;</span><span style="color:#111">).</span><span style="color:#75af00">addEventListener</span><span style="color:#111">(</span><span style="color:#d88200">&#39;click&#39;</span><span style="color:#111">,</span> <span style="color:#75af00">loadData</span><span style="color:#111">);</span>
    <span style="color:#00a8c8">function</span> <span style="color:#75af00">loadData</span><span style="color:#111">()</span> <span style="color:#111">{</span>

    <span style="color:#75715e">// Create an XHR Object
</span><span style="color:#75715e"></span>    <span style="color:#00a8c8">const</span> <span style="color:#75af00">xhr</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#75af00">XMLHttpRequest</span><span style="color:#111">();</span>

    <span style="color:#75715e">// OPEN
</span><span style="color:#75715e"></span>    <span style="color:#75af00">xhr</span><span style="color:#111">.</span><span style="color:#75af00">open</span><span style="color:#111">(</span><span style="color:#d88200">&#39;GET&#39;</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;data.txt&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">true</span><span style="color:#111">);</span>
    <span style="color:#75715e">// console.log(&#39;READYSTATE&#39;, xhr.readyState);
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// Optional - Used for spinners/loaders
</span><span style="color:#75715e"></span>    <span style="color:#75af00">xhr</span><span style="color:#111">.</span><span style="color:#75af00">onprogress</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">function</span><span style="color:#111">(){</span>
        <span style="color:#75af00">console</span><span style="color:#111">.</span><span style="color:#75af00">log</span><span style="color:#111">(</span><span style="color:#d88200">&#39;READYSTATE&#39;</span><span style="color:#111">,</span> <span style="color:#75af00">xhr</span><span style="color:#111">.</span><span style="color:#75af00">readyState</span><span style="color:#111">);</span>
    <span style="color:#111">}</span>

    <span style="color:#75af00">xhr</span><span style="color:#111">.</span><span style="color:#75af00">onload</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">function</span><span style="color:#111">(){</span>
        <span style="color:#75af00">console</span><span style="color:#111">.</span><span style="color:#75af00">log</span><span style="color:#111">(</span><span style="color:#d88200">&#39;READYSTATE&#39;</span><span style="color:#111">,</span> <span style="color:#75af00">xhr</span><span style="color:#111">.</span><span style="color:#75af00">readyState</span><span style="color:#111">);</span>
        <span style="color:#00a8c8">if</span><span style="color:#111">(</span><span style="color:#00a8c8">this</span><span style="color:#111">.</span><span style="color:#75af00">status</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">200</span><span style="color:#111">)</span> <span style="color:#111">{</span>
            <span style="color:#75715e">// console.log(this.responseText);
</span><span style="color:#75715e"></span>            <span style="color:#111">document</span><span style="color:#111">.</span><span style="color:#75af00">getElementById</span><span style="color:#111">(</span><span style="color:#d88200">&#39;output&#39;</span><span style="color:#111">).</span><span style="color:#75af00">innerHTML</span> <span style="color:#f92672">=</span> 
                                <span style="color:#d88200">`&lt;h1&gt;</span><span style="color:#d88200">${</span><span style="color:#00a8c8">this</span><span style="color:#111">.</span><span style="color:#75af00">responseText</span><span style="color:#d88200">}</span><span style="color:#d88200">&lt;/h1&gt;`</span><span style="color:#111">;</span>
        <span style="color:#111">}</span>
    <span style="color:#111">}</span>

    <span style="color:#75715e">// xhr.onreadystatechange = function() {
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// console.log(&#39;READYSTATE&#39;, xhr.readyState);
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// if(this.status === 200 &amp;&amp; this.readyState === 4){
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// console.log(this.responseText);
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// }
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// }
</span><span style="color:#75715e"></span>
    <span style="color:#75af00">xhr</span><span style="color:#111">.</span><span style="color:#75af00">onerror</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">function</span><span style="color:#111">()</span> <span style="color:#111">{</span>
        <span style="color:#75af00">console</span><span style="color:#111">.</span><span style="color:#75af00">log</span><span style="color:#111">(</span><span style="color:#d88200">&#39;Request error...&#39;</span><span style="color:#111">);</span>
    <span style="color:#111">}</span>
    <span style="color:#75af00">xhr</span><span style="color:#111">.</span><span style="color:#75af00">send</span><span style="color:#111">();</span>


    <span style="color:#75715e">// readyState Values
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 0: request not initialized 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 1: server connection established
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 2: request received 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 3: processing request 
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 4: request finished and response is ready
</span><span style="color:#75715e"></span>
    <span style="color:#75715e">// HTTP Statuses
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 200: &#34;OK&#34;
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 403: &#34;Forbidden&#34;
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 404: &#34;Not Found&#34;
</span><span style="color:#75715e"></span>    <span style="color:#111">}</span>
</code></pre></div>
<p><strong>Public api to get json..</strong></p>

<p>This url get some random jokes:
<a href="http://api.icndb.com/jokes/random">http://api.icndb.com/jokes/random</a></p>

<h3 id="xhr-code-mini">XHR code - Mini:</h3>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">    <span style="color:#00a8c8">const</span> <span style="color:#75af00">xhr</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#75af00">XMLHttpRequest</span><span style="color:#111">();</span>
    <span style="color:#75af00">xhr</span><span style="color:#111">.</span><span style="color:#75af00">open</span><span style="color:#111">(</span><span style="color:#d88200">&#39;GET&#39;</span><span style="color:#111">,</span> <span style="color:#d88200">&#39;data.txt&#39;</span><span style="color:#111">,</span> <span style="color:#00a8c8">true</span><span style="color:#111">);</span>
    <span style="color:#75af00">xhr</span><span style="color:#111">.</span><span style="color:#75af00">onload</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">function</span><span style="color:#111">(){</span> <span style="color:#111">...</span> <span style="color:#111">}</span>
    <span style="color:#75af00">xhr</span><span style="color:#111">.</span><span style="color:#75af00">onerror</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">function</span><span style="color:#111">()</span> <span style="color:#111">{</span> <span style="color:#111">...</span> <span style="color:#111">}</span>
    <span style="color:#75af00">xhr</span><span style="color:#111">.</span><span style="color:#75af00">send</span><span style="color:#111">();</span>
</code></pre></div></article>
    </div>

    
    
    <aside class="toc fixed">
      <nav id="TableOfContents">
<ul>
<li><a href="#async-programming">Async Programming</a>
<ul>
<li><a href="#xhr-code">XHR Code:</a>
<ul>
<li><a href="#xhr-code-mini">XHR code - Mini:</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </aside>
    

  </main>
  

</body>

</html>